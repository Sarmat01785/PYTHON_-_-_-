### Обработка исключений, try, except, finally  Улучшение кода с помощью docstrings

Менеджер контекста `with as` — это удобный способ управления ресурсами, такими как файлы, базы данных и другие объекты, требующие открытия и закрытия. Он обеспечивает безопасное использование ресурсов, гарантируя их освобождение после завершения работы.

#### Синтаксис `with as`

```python
with выражение as переменная:
    блок кода
```

#### Пример использования менеджера контекста для работы с файлом

```python
# Открываем файл example.txt в режиме записи ('w')
with open('example.txt', 'w') as file:
    # Пишем строку в файл
    file.write('Привет, мир!')
    
# Файл автоматически закроется после выполнения блока кода
```

#### Обработка исключений внутри менеджера контекста

Даже если в блоке кода возникает исключение, файл все равно будет закрыт благодаря менеджеру контекста.

```python
try:
    with open('example.txt', 'w') as file:
        file.write('Привет, мир!')
        # Искусственно вызываем исключение
        raise Exception('Произошла ошибка')
        
except Exception as e:
    # Печать сообщения об ошибке
    print(f"Произошло исключение: {e}")
    
# Файл 'example.txt' будет закрыт несмотря на возникшее исключение
```

#### Пример использования менеджера контекста с базой данных

Менеджеры контекста полезны не только для работы с файлами, но и с другими ресурсами, например, соединениями с базами данных.

```python
# Предположим, у нас есть объект database_connection
with database_connection as conn:
    # Выполняем запросы к базе данных
    cursor = conn.cursor()
    cursor.execute("SELECT * FROM users")
    rows = cursor.fetchall()
    for row in rows:
        print(row)

# Соединение с базой данных будет закрыто после выхода из блока with
```

#### Пример записи в файл с использованием менеджера контекста

```python
# Открытие файла в режиме добавления ('a'), чтобы данные дописывались в конец файла
with open("file.txt", "a", encoding="utf-8") as file:
    # Добавление текста с новой строкой
    file.write("something\n")
    # Добавление еще одного фрагмента текста без переноса строки
    file.write("что-то")

# Сообщение об успешном завершении операции
print("Запись в файл завершена успешно!")
```

#### Преимущества использования менеджеров контекста

Использование менеджера контекста упрощает код и делает его более безопасным и читабельным. Вам не нужно вручную вызывать методы закрытия ресурсов (`close()` для файлов, `disconnect()` для соединений с БД и т.п.), так как это делается автоматически.

### Улучшение кода с помощью docstrings

Docstrings используются для документирования функций, классов и методов. Они помогают другим разработчикам понять назначение и работу кода.

Пример функции с docstring:

```python
def write_to_file(filename, text):
    """
    Функция записывает текст в указанный файл.
    
    :param filename: Имя файла, в который необходимо записать текст
    :type filename: str
    :param text: Текст, который нужно записать в файл
    :type text: str
    :return: None
    """
    with open(filename, "a", encoding="utf-8") as file:
        file.write(text + "\n")
```
Теперь, если кто-то захочет использовать эту функцию, он сможет легко узнать её параметры и поведение, просто прочитав docstring.

### Итоговый пример с комментариями и docstrings

```python
def read_from_file(filename):
    """
    Читает содержимое указанного файла и возвращает его.
    
    :param filename: Имя файла, из которого нужно прочитать данные
    :type filename: str
    :return: Содержимое файла
    :rtype: str
    """
    with open(filename, "r", encoding="utf-8") as file:
        return file.read()

def main():
    # Чтение содержимого файла
    content = read_from_file("input.txt")
    print(content)
    
    # Запись нового содержимого в другой файл
    write_to_file("output.txt", f"Новое содержание: {content}")

if __name__ == "__mai...
