### Декораторы в Python

Декораторы — это функции, которые изменяют поведение других функций, не меняя их исходного кода. Они особенно полезны для логирования, проверки, кэширования и других задач.

#### Как работают декораторы?

Декорация происходит путем вызова одной функции через другую. Основная идея заключается в том, что мы можем «оборачивать» одну функцию другой функцией, чтобы изменить её поведение.

#### Пример простого декоратора

Создадим декоратор, который выводит информацию о вызове функции.


```python
def log_decorator(func):
    """
    Декоратор, который выводит информацию о вызове функции.

    :param func: Декорируемая функция
    :return: Обёртка вокруг декорируемой функции
    """
    def wrapper(*args, **kwargs):
        """
        Внутренняя функция-обёртка, которая выполняет логирование и вызывает оригинальную функцию.

        :param args: Позиционные аргументы оригинальной функции
        :param kwargs: Именованные аргументы оригинальной функции
        :return: Результат вызова оригинальной функции
        """
        print(f"Calling function {func.__name__}")  # Логирование имени функции
        return func(*args, **kwargs)  # Вызов оригинальной функции

    return wrapper

```

#### Применение декоратора

Применим созданный декоратор к функции, которая складывает два числа.


```python
@log_decorator
def add(a, b):
    """
    Функция для сложения двух чисел.

    :param a: Первое число
    :param b: Второе число
    :return: Сумма двух чисел
    """
    return a + b

# Вызов декорированной функции
result = add(2, 3)
print(result)  # Выведет: Calling function add 5
```

    Calling function add
    5
    

В этом примере декоратор `log_decorator` добавляет логирование к функции `add`. Когда `add` вызывается, сначала выполняется код декоратора, который печатает имя функции, а затем вызывается сама функция `add`.

#### Пример с обработкой исключений в декораторе

Теперь создадим декоратор, который обрабатывает возможные исключения в декорируемых функциях.


```python
def exception_handling_decorator(func):
    """
    Декоратор для обработки исключений в декорируемой функции.

    :param func: Декорируемая функция
    :return: Обёртка вокруг декорируемой функции
    """
    def wrapper(*args, **kwargs):
        """
        Внутренняя функция-обёртка, которая пытается вызвать оригинальную функцию и обрабатывает исключения.

        :param args: Позиционные аргументы оригинальной функции
        :param kwargs: Именованные аргументы оригинальной функции
        :return: Результат вызова оригинальной функции или сообщение об ошибке
        """
        try:
            return func(*args, **kwargs)  # Попытка выполнить функцию
        except Exception as e:
            print(f"An error occurred: {e}")  # Вывод сообщения об ошибке

    return wrapper
```

#### Применение декоратора с обработкой исключений

Применим созданный декоратор к функции, которая может вызвать исключение.


```python
@exception_handling_decorator
def divide(a, b):
    """
    Функция для деления двух чисел.

    :param a: Делимое
    :param b: Делитель
    :return: Частное от деления
    """
    return a / b

# Вызов декорированной функции и обработка возможного исключения
divide_result = divide(10, 0)
```

    An error occurred: division by zero
    

При делении на ноль возникнет исключение, которое будет перехвачено и выведено сообщение об ошибке.

### Заключение

Декораторы являются мощным инструментом в арсенале `Python`-разработчика. Они позволяют изменять поведение функций без необходимости вносить изменения в сами функции. Это делает код более гибким и удобным для поддержки.
